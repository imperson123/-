webpackJsonp([9],{Q6NH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),r=a.n(i),o=a("exGp"),n=a.n(o),s=a("j9JH"),l=a.n(s),c=a("7+uW"),p={name:"cpu",data:function(){return{CPU_percent:[0,0,0,0,0,0,0,0],CPU_time:[0,0,0,0,0,0,0,0,0]}},methods:{myEcharts:function(e,t){for(var a=[],i=0;i<30;i++)a.push(((30-i)/1).toString()+"秒前");a.splice(29,1,"现在");var r={animation:!1,grid:{x:40,y:50,x2:40,y2:30},title:{top:"5%",left:"center",text:"CPU利用率",textStyle:{color:"#FFF"}},tooltip:{trigger:"axis",axisPointer:{animation:!1},appendToBody:!0,formatter:function(e){return e[0].name+"CPU的利用率："+e[0].value+"%"}},xAxis:[{show:!0,type:"category",boundaryGap:!1,data:a,axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},interval:a.length/5-1,showMaxLabel:!0}}],yAxis:[{type:"value",axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},max:function(e){var t=e.max;return t<=2?2:5*Math.ceil(t/5)},axisLabel:{textStyle:{color:"#eeeeee"},formatter:"{value}%",showMaxLabel:!0}}],series:[{name:"实时值",type:"line",showSymbol:!1,data:t,color:"#409EFF"}]};e.setOption(r)},myGraph:function(e){var t={grid:{x:40,y:50,x2:40,y2:30,containLabel:!0},tooltip:{show:!0,formatter:function(e){return"CPU核心"+e.dataIndex+"的占用率为"+e.data+"%"},appendToBody:!0},title:{top:"5%",left:"center",text:"CPU核心占用率",textStyle:{color:"#FFF"}},xAxis:{type:"category",data:["0","1","2","3","4","5","6","7"],axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}}},yAxis:{type:"value",max:function(e){var t=e.max;return t<=5?5:5*Math.ceil(t/5)},axisLabel:{formatter:"{value}%"},axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}}},series:[{data:this.CPU_percent,type:"bar",color:"#fc765e",barWidth:30}]};e.setOption(t)},myGraph2:function(e){for(var t=[parseFloat(this.CPU_time.user)/10,parseFloat(this.CPU_time.nice)/10,parseFloat(this.CPU_time.system)/10,parseFloat(this.CPU_time.idle)/10,parseFloat(this.CPU_time.iowait)/10,parseFloat(this.CPU_time.irq)/10,parseFloat(this.CPU_time.softirq)/10,parseFloat(this.CPU_time.steal)/10,parseFloat(this.CPU_time.guest)/10],a=[],i=0;i<t.length;i++)0===t[i]?a.push(0):a.push(l()(t[i])+1);var r={grid:{x:50,y:50,x2:50,y2:40},tooltip:{show:!0,formatter:function(e){return["用户态使用CPU总时间","根据优先级修正值分配给低优先级用户态使用的CPU总时间","系统态使用CPU总时间","CPU空闲总时间","CPU等待IO的总时间","CPU处理硬中断总时间","CPU处理软中断总时间","虚拟机运行模式下，其它虚拟机占用CPU总时间","CPU虚拟化运行总时间"][e.dataIndex]+": "+t[e.dataIndex]+"秒"},appendToBody:!0},title:{top:"5%",left:"center",text:"CPU使用时间",textStyle:{color:"#FFF"}},xAxis:{type:"category",data:["user","nice","system","idle","iowait","irq","softirq","steal","guest"],axisLabel:{show:!0,interval:0,rotate:45},axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}}},yAxis:{type:"value",axisLabel:{formatter:function(e){var t=[];return 0===e?t.push("0s"):t.push("10^"+(e-1)+"s"),t}},axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}}},series:[{name:"cpu use time",data:a,type:"bar",color:"#aa88f8",barWidth:30}]};e.setOption(r)},getData:function(){for(var e,t=(e=n()(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.$axios.get("api/monitor/status",{cancelToken:new h(function(e){c.default.$httpRequestList.push(e)})}).then(function(e){s.CPU_percent=e.data.cpu_data.cpu_percent,s.CPU_percent.forEach(function(e,t){s.CPU_percent[t]=parseFloat(s.CPU_percent[t])}),s.CPU_time=e.data.cpu_data.cpu_time}).catch(function(e){console.error(e)});case 2:for(t=0;t<p;t++){for(n=0,t=0;t<8;t++)n+=s.CPU_percent[t];n/=8,l.push(parseFloat(n.toFixed(3)))}l.splice(0,p),s.myEcharts(o,l),s.myGraph(a),s.myGraph2(i);case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)}),a=this.$echarts.init(document.getElementById("graph2")),i=this.$echarts.init(document.getElementById("graph3")),o=this.$echarts.init(document.getElementById("graph1")),s=this,l=[],p=1,u=0;u<30*p;u++)l.push(0);var h=this.$axios.CancelToken;t(),this.timer=setInterval(function(){t()},1e3),window.onresize=function(){o.resize(),a.resize(),i.resize()}}},mounted:function(){this.getData()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",[t("el-header",{attrs:{height:"2%",width:"100%"}}),this._v(" "),t("el-main",{attrs:{width:"100%",height:"100%"}},[t("div",{staticClass:"TopBox",attrs:{id:"graph1"}}),this._v(" "),t("div",{staticClass:"BottomBox_left",attrs:{id:"graph2"}}),this._v(" "),t("div",{staticClass:"BottomBox_right",attrs:{id:"graph3"}})])],1)],1)},staticRenderFns:[]};var h=a("VU/8")(p,u,!1,function(e){a("S/x6")},"data-v-0e9dc3b2",null);t.default=h.exports},"S/x6":function(e,t){},eaw8:function(e,t,a){var i=a("kM2E");i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},iggS:function(e,t,a){a("eaw8"),e.exports=a("FeBl").Math.log10},j9JH:function(e,t,a){e.exports={default:a("iggS"),__esModule:!0}}});
//# sourceMappingURL=9.d82915bfe5a76980cd4a.js.map