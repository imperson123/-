webpackJsonp([12],{WpOH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Xxa5"),i=a.n(o),r=a("exGp"),n=a.n(r),s=a("7+uW"),l={name:"memory",data:function(){return{APP_info:[0,0,0,0,0,0],BASE_info:[0,0,0,0,0,0,0,0,0,0,0]}},methods:{myEcharts:function(e,t){for(var a=[],o=0;o<30;o++)a.push(((30-o)/1).toString()+"秒前");a.splice(29,1,"现在");var i={animation:!1,grid:{x:40,y:50,x2:40,y2:30},title:{top:"3%",left:"center",text:"内存占用率",textStyle:{color:"#FFF"}},tooltip:{trigger:"axis",axisPointer:{animation:!1},appendToBody:!0,formatter:function(e){return e[0].name+"内存的占用率："+e[0].value+"%"}},xAxis:[{show:!0,type:"category",boundaryGap:!1,data:a,axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},interval:a.length/5-1,showMaxLabel:!0}}],yAxis:[{type:"value",axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},formatter:"{value}%"}}],series:[{name:"实时值",type:"line",showSymbol:!1,data:t,color:"#409EFF"}]};e.setOption(i)},myGraph1:function(e){var t=[parseFloat((parseFloat(this.BASE_info.used)/Math.pow(2,30)).toFixed(3)),parseFloat((parseFloat(this.BASE_info.free)/Math.pow(2,30)).toFixed(3)),parseFloat((parseFloat(this.BASE_info.active)/Math.pow(2,30)).toFixed(3)),parseFloat((parseFloat(this.BASE_info.inactive)/Math.pow(2,30)).toFixed(3)),parseFloat((parseFloat(this.BASE_info.buffers)/Math.pow(2,30)).toFixed(3)),parseFloat((parseFloat(this.BASE_info.cached)/Math.pow(2,30)).toFixed(3)),parseFloat((parseFloat(this.BASE_info.shared)/Math.pow(2,30)).toFixed(3)),parseFloat((parseFloat(this.BASE_info.slab)/Math.pow(2,30)).toFixed(3))],a={grid:{x:50,y:50,x2:50,y2:40},tooltip:{show:!0,appendToBody:!0,formatter:function(e){return["当前已用的内存量","当前可用的内存量","当前活跃的内存量","当前非活跃的内存量","buffers","cached","共享内存量","slab"][e.dataIndex]+": "+t[e.dataIndex]+"G"}},title:{top:"5%",left:"center",text:"内存各分区容量情况",textStyle:{color:"#FFF"}},xAxis:{type:"category",data:["used","free","active","inactive","buffers","cached","shared","slab"],axisLabel:{show:!0,interval:0,rotate:45},axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}G"},axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}}},series:[{name:"cpu use time",data:t,type:"bar",color:"#aa88f8",barWidth:20}]};e.setOption(a)},myGraph2:function(e){var t={color:["#ff5300","#ff9700"],tooltip:{trigger:"item",appendToBody:!0,formatter:"{b} : {c}KB"},title:{top:"5%",left:"center",text:"当前活跃的内存情况分布",textStyle:{color:"#FFF"}},legend:{type:"scroll",orient:"vertical",left:"70%",right:"3%",top:"40%",bottom:20,textStyle:{color:"#FFF"}},series:[{name:"当前活跃的内存情况分布",type:"pie",radius:["40%","70%"],center:["38%","55%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:parseFloat(this.APP_info.active_anon)/Math.pow(2,10),name:"active_anon"},{value:parseFloat(this.APP_info.active_file)/Math.pow(2,10),name:"active_file"}]}]};e.setOption(t)},myGraph3:function(e){var t={color:["#e9003a","#00ab6f"],tooltip:{trigger:"item",appendToBody:!0,formatter:"{b} : {c}KB"},title:{top:"5%",left:"center",text:"当前非活跃的内存情况分布",textStyle:{color:"#FFF"}},legend:{type:"scroll",orient:"vertical",left:"70%",right:"3%",top:"40%",bottom:20,textStyle:{color:"#FFF"}},series:[{name:"当前非活跃的内存情况分布",type:"pie",radius:["40%","70%"],center:["38%","55%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:parseFloat(this.APP_info.inactive_anon)/Math.pow(2,10),name:"inactive_anon"},{value:parseFloat(this.APP_info.inactive_file)/Math.pow(2,10),name:"inactive_file"}]}]};e.setOption(t)},getData:function(){for(var e,t=(e=n()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.$axios.get("api/monitor/status",{cancelToken:new f(function(e){s.default.$httpRequestList.push(e)})}).then(function(e){p.APP_info=e.data.memory_data.appendix_info,p.BASE_info=e.data.memory_data.basic_info}).catch(function(e){console.error(e)});case 2:for(t=0;t<h;t++)c.push(parseFloat(p.BASE_info.percent));c.splice(0,h),p.myEcharts(a,c),p.myGraph1(o),p.myGraph2(r),p.myGraph3(l);case 8:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)}),a=this.$echarts.init(document.getElementById("graph1")),o=this.$echarts.init(document.getElementById("graph2")),r=this.$echarts.init(document.getElementById("graph3")),l=this.$echarts.init(document.getElementById("graph4")),p=this,c=[],h=1,d=0;d<30*h;d++)c.push(0);var f=this.$axios.CancelToken;t(),this.timer=setInterval(function(){t()},1e3),window.onresize=function(){a.resize(),o.resize(),r.resize(),l.resize()}}},mounted:function(){this.getData()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",[t("el-header",{attrs:{height:"2%",width:"100%"}}),this._v(" "),t("el-main",{attrs:{width:"100%",height:"100%"}},[t("div",{staticClass:"TopBox",attrs:{id:"graph1"}}),this._v(" "),t("div",{staticClass:"BottomBox_left",attrs:{id:"graph2"}}),this._v(" "),t("div",{staticClass:"BottomBox_middle",attrs:{id:"graph3"}}),this._v(" "),t("div",{staticClass:"BottomBox_right",attrs:{id:"graph4"}})])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,p,!1,function(e){a("rxXy")},"data-v-4b82549d",null);t.default=c.exports},rxXy:function(e,t){}});
//# sourceMappingURL=12.d7a6a5be9194a9f5bfab.js.map