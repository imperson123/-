webpackJsonp([10],{"3mxN":function(e,t){},"9EjD":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),o=a("exGp"),r=a.n(o),s={data:function(){return{question:"",qaHistory:[]}},methods:{submitQuestion:function(){var e=this;this.question.trim()&&this.$axios.post("http://127.0.0.1:5000/api/qa",{question:this.question}).then(function(t){e.qaHistory.push(t.data),e.question=""}).catch(function(t){console.error("问答请求失败:",t),e.$message.error("获取回答失败，请重试")})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"qa-container"},[a("el-card",{attrs:{title:"项目问答助手"}},[a("el-input",{attrs:{placeholder:"请输入您的问题..."},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitQuestion.apply(null,arguments)}},model:{value:e.question,callback:function(t){e.question=t},expression:"question"}}),e._v(" "),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:e.submitQuestion}},[e._v("\n      提问\n    ")]),e._v(" "),e.qaHistory.length>0?a("div",{staticClass:"qa-history"},e._l(e.qaHistory,function(t,i){return a("div",{key:i,staticClass:"qa-item"},[a("div",{staticClass:"question"},[e._v("Q: "+e._s(t.question))]),e._v(" "),a("div",{staticClass:"answer"},[e._v("A: "+e._s(t.answer))])])}),0):e._e()],1)],1)},staticRenderFns:[]};var c={name:"mainPage",components:{QaComponent:a("VU/8")(s,l,!1,function(e){a("iIzQ")},"data-v-0bb19b98",null).exports},data:function(){return{CPU_percent:[0,0,0,0,0,0,0,0],DISK_percent:0,MEMORY_percent:0,NET_recv:0,NET_sent:0}},methods:{myGraph1:function(e,t){for(var a=[],i=0;i<30;i++)a.push(((30-i)/1).toString()+"秒前");a.splice(29,1,"现在");var n={animation:!1,grid:{y2:30},title:{top:"5%",left:"center",text:"CPU利用率",textStyle:{color:"#FFF"}},tooltip:{trigger:"axis",axisPointer:{animation:!1},appendToBody:!0,formatter:function(e){return e[0].name+"CPU的利用率："+e[0].value+"%"}},xAxis:[{show:!0,type:"category",boundaryGap:!1,data:a,axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},interval:a.length/5-1,showMaxLabel:!0}}],yAxis:[{type:"value",axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},formatter:"{value}%"},max:function(e){var t=e.max;return t<=3?3:5*Math.ceil(t/5)}}],series:[{name:"CPU利用率",type:"line",showSymbol:!1,data:t,color:"#409EFF"}]};e.setOption(n)},myGraph2:function(e,t){for(var a,i,n=[],o=0;o<30;o++)n.push(((30-o)/1).toString()+"秒前");n.splice(29,1,"现在"),e.setOption((a=t,{color:"#409EFF",animation:!1,grid:{y2:30},title:{top:"5%",left:"center",text:i="磁盘占用率",textStyle:{color:"#FFF"}},tooltip:{trigger:"axis",axisPointer:{animation:!1},appendToBody:!0,formatter:function(e){return e[0].name+"磁盘的占用率："+e[0].value+"%"}},xAxis:[{type:"category",boundaryGap:!1,data:n,axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},interval:n.length/5-1,showMaxLabel:!0}}],yAxis:[{max:100,type:"value",axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},formatter:"{value}%"}}],series:[{name:i,type:"line",showSymbol:!1,data:a}]}))},myGraph3:function(e,t){for(var a=[],i=0;i<30;i++)a.push(((30-i)/1).toString()+"秒前");a.splice(29,1,"现在");var n={animation:!1,grid:{y2:30},title:{top:"3%",left:"center",text:"内存占用率",textStyle:{color:"#FFF"}},tooltip:{trigger:"axis",axisPointer:{animation:!1},appendToBody:!0,formatter:function(e){return e[0].name+"内存的占用率："+e[0].value+"%"}},xAxis:[{show:!0,type:"category",boundaryGap:!1,data:a,axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},interval:a.length/5-1,showMaxLabel:!0}}],yAxis:[{type:"value",axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},max:100,axisLabel:{textStyle:{color:"#eeeeee"},formatter:"{value}%"}}],series:[{name:"内存占用率",type:"line",showSymbol:!1,data:t,color:"#409EFF"}]};e.setOption(n)},myGraph4:function(e,t,a){for(var i,n,o=[],r=0;r<30;r++)o.push(((30-r)/1).toString()+"秒前");o.splice(29,1,"现在"),e.setOption((i=t,n=a,{animation:!1,grid:{y2:30},title:{top:"5%",left:"center",text:"以太网传输速率",textStyle:{color:"#FFF"}},tooltip:{trigger:"axis",axisPointer:{animation:!1},appendToBody:!0,formatter:function(e){for(var t=e[0].name,a=0,i=e.length;a<i;a++)t+="<br/>"+e[a].marker+e[a].seriesName+": "+e[a].value+"KB/s";return t}},legend:{orient:"vertical",x:"right",y:"top",show:!0,data:["接收速率","发送速率"],textStyle:{color:"#FFF"}},xAxis:[{show:!0,type:"category",boundaryGap:!1,data:o,axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},interval:o.length/5-1,showMaxLabel:!0}}],yAxis:[{type:"value",axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},formatter:"{value}KB/s"}}],series:[{name:"接收速率",type:"line",showSymbol:!1,data:i},{name:"发送速率",type:"line",showSymbol:!1,data:n,itemStyle:{normal:{lineStyle:{type:"dotted"}}}}]}))},getData:function(){for(var e,t=(e=r()(n.a.mark(function e(){var t,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.$axios.get("api/monitor/status",{cancelToken:new g(function(e){Vue.$httpRequestList.push(e)})}).then(function(e){l.CPU_percent=e.data.cpu_data.percent,l.CPU_percent.forEach(function(e,t){l.CPU_percent[t]=parseFloat(l.CPU_percent[t])}),l.DISK_percent=parseFloat(e.data.disk_data.disk_usage.percent),l.MEMORY_percent=parseFloat(e.data.memory_data.basic_info.percent),l.NET_recv=parseFloat(e.data.net_data.bytes_recv),l.NET_sent=parseFloat(e.data.net_data.bytes_sent)}).catch(function(e){console.error(e)});case 2:for(t=0;t<d;t++){for(r=0,t=0;t<8;t++)r+=l.CPU_percent[t];r/=8,c.push(parseFloat(r.toFixed(3))),p.push(l.DISK_percent),u.push(l.MEMORY_percent),0===f?(f=1,h.push(0),y.push(0)):(h.push(parseFloat(((l.NET_recv-x)/Math.pow(2,10)).toFixed(3))),y.push(parseFloat(((l.NET_sent-v)/Math.pow(2,10)).toFixed(3)))),x=l.NET_recv,v=l.NET_sent}c.splice(0,d),p.splice(0,d),u.splice(0,d),h.splice(0,d),y.splice(0,d),l.myGraph1(a,c),l.myGraph2(i,p),l.myGraph3(o,u),l.myGraph4(s,h,y);case 12:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)}),a=this.$echarts.init(document.getElementById("graph1")),i=this.$echarts.init(document.getElementById("graph2")),o=this.$echarts.init(document.getElementById("graph3")),s=this.$echarts.init(document.getElementById("graph4")),l=this,c=[],p=[],u=[],h=[],y=[],d=1,m=0;m<30*d;m++)c.push(0),p.push(0),u.push(0),h.push(0),y.push(0);var x,v,f=0,g=this.$axios.CancelToken;t(),this.timer=setInterval(function(){t()},1e3),window.onresize=function(){a.resize(),i.resize(),o.resize(),s.resize()}}},mounted:function(){this.getData()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this._m(0),this._v(" "),t("qa-component")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"el-container"},[t("div",{staticClass:"el-main"},[t("div",{staticClass:"LeftBox"},[t("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"graph1"}})]),this._v(" "),t("div",{staticClass:"RightBox"},[t("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"graph2"}})]),this._v(" "),t("div",{staticClass:"LeftBox"},[t("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"graph3"}})]),this._v(" "),t("div",{staticClass:"RightBox"},[t("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"graph4"}})])])])}]};var u=a("VU/8")(c,p,!1,function(e){a("3mxN")},"data-v-a29d3ff0",null);t.default=u.exports},iIzQ:function(e,t){}});
//# sourceMappingURL=10.a0b4e4893690d90c1fb0.js.map