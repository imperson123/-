webpackJsonp([8],{"JSB+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),o=a.n(i),r=a("exGp"),s=a.n(r),n=a("j9JH"),l=a.n(n),c=a("7+uW"),d={name:"disk",data:function(){return{DISK_io:[0,0,0,0,0,0,0,0,0],DISK_usage:[0,0,0,0]}},methods:{myEcharts:function(e,t){for(var a,i=[],o=0;o<30;o++)i.push(((30-o)/1).toString()+"秒前");i.splice(29,1,"现在"),e.setOption((a=t,{color:"#409EFF",animation:!1,grid:{x:40,y:50,x2:40,y2:30},title:{top:"5%",left:"center",text:"磁盘占用率",textStyle:{color:"#FFF"}},tooltip:{trigger:"axis",axisPointer:{animation:!1},appendToBody:!0,formatter:function(e){return e[0].name+"磁盘的占用率："+e[0].value+"%"}},xAxis:[{type:"category",boundaryGap:!1,data:i,axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},interval:i.length/5-1,showMaxLabel:!0}}],yAxis:[{type:"value",axisLine:{lineStyle:{type:"solid",color:"#eeeeee"}},axisLabel:{textStyle:{color:"#eeeeee"},formatter:"{value}%"}}],series:[{name:"实时值",type:"line",showSymbol:!1,data:a}]}))},myGraph1:function(e){for(var t=[parseFloat(this.DISK_io.read_time),parseFloat(this.DISK_io.write_time),parseFloat(this.DISK_io.busy_time)],a=[],i=0;i<t.length;i++)0===t[i]?a.push(0):a.push(l()(t[i])+1);var o={color:"#a0f854",tooltip:{show:!0,appendToBody:!0,formatter:function(e){return["磁盘读","磁盘写","磁盘处理\nI/O请求"][e.dataIndex]+"的总时间为"+t[e.dataIndex]+"ms"}},grid:{x:"20%"},title:{top:"5%",left:"center",text:"磁盘使用总时间情况",textStyle:{color:"#FFF"}},xAxis:{type:"category",data:["磁盘读","磁盘写","磁盘处理\nI/O请求"],axisLabel:{textStyle:{color:"#eeeeee"}}},yAxis:{type:"value",axisLabel:{formatter:function(e){var t=[];return 0===e?t.push("0ms"):t.push("10^"+(e-1)+"ms"),t},textStyle:{color:"#eeeeee"}}},series:[{data:a,type:"bar",barWidth:35}]};e.setOption(o)},myGraph2:function(e){var t={tooltip:{trigger:"item",appendToBody:!0},grid:{y:"15%"},title:{top:"5%",left:"center",text:"磁盘读写总次数情况",textStyle:{color:"#FFF"}},legend:{type:"scroll",orient:"vertical",left:"70%",right:"3%",top:"40%",bottom:20,textStyle:{color:"#FFF"}},series:[{name:"磁盘读写总次数情况",type:"pie",radius:["40%","70%"],center:["35%","55%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},grid:{y:"50%"},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:parseFloat(this.DISK_io.read_count),name:"读"},{value:parseFloat(this.DISK_io.read_merged_count),name:"读合并优化"},{value:parseFloat(this.DISK_io.write_count),name:"写"},{value:parseFloat(this.DISK_io.write_merged_count),name:"写合并优化"}]}]};e.setOption(t)},myGraph3:function(e){var t=[parseFloat((parseFloat(this.DISK_io.read_bytes)/Math.pow(2,30)).toFixed(3)),parseFloat((parseFloat(this.DISK_io.write_bytes)/Math.pow(2,30)).toFixed(3))],a={color:"#cf7efa",grid:{x:"15%"},xAxis:{type:"category",data:["读总字节数","写总字节数"],axisLabel:{textStyle:{color:"#eeeeee"}}},tooltip:{show:!0,appendToBody:!0,formatter:function(e){return["磁盘读","磁盘写"][e.dataIndex]+"总字节数为"+t[e.dataIndex]+"GB"}},title:{top:"5%",left:"center",text:"磁盘读写总字节数情况",textStyle:{color:"#FFF"}},yAxis:{type:"value",axisLabel:{formatter:"{value}GB",textStyle:{color:"#eeeeee"}}},series:[{data:t,type:"bar",barWidth:"32%"}]};e.setOption(a)},getData:function(){for(var e,t=(e=s()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.$axios.get("api/monitor/status",{cancelToken:new u(function(e){c.default.$httpRequestList.push(e)})}).then(function(e){l.DISK_io=e.data.disk_data.disk_io,l.DISK_usage=e.data.disk_data.disk_usage}).catch(function(e){console.error(e)});case 2:for(t=0;t<p;t++)d.push(parseFloat(l.DISK_usage.percent));d.splice(0,p),l.myEcharts(a,d),l.myGraph1(i),l.myGraph2(r),l.myGraph3(n);case 8:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)}),a=this.$echarts.init(document.getElementById("graph1")),i=this.$echarts.init(document.getElementById("graph2")),r=this.$echarts.init(document.getElementById("graph3")),n=this.$echarts.init(document.getElementById("graph4")),l=this,d=[],p=1,h=0;h<30*p;h++)d.push(0);var u=this.$axios.CancelToken;t(),this.timer=setInterval(function(){t()},1e3),window.onresize=function(){a.resize(),i.resize(),r.resize(),n.resize()}}},mounted:function(){this.getData()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",[t("el-header",{attrs:{height:"2%",width:"100%"}}),this._v(" "),t("el-main",{attrs:{width:"100%",height:"100%"}},[t("div",{staticClass:"TopBox",attrs:{id:"graph1"}}),this._v(" "),t("div",{staticClass:"BottomBox_left",attrs:{id:"graph2"}}),this._v(" "),t("div",{staticClass:"BottomBox_middle",attrs:{id:"graph3"}}),this._v(" "),t("div",{staticClass:"BottomBox_right",attrs:{id:"graph4"}})])],1)],1)},staticRenderFns:[]};var h=a("VU/8")(d,p,!1,function(e){a("NrPT")},"data-v-950d7bb0",null);t.default=h.exports},NrPT:function(e,t){},eaw8:function(e,t,a){var i=a("kM2E");i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},iggS:function(e,t,a){a("eaw8"),e.exports=a("FeBl").Math.log10},j9JH:function(e,t,a){e.exports={default:a("iggS"),__esModule:!0}}});
//# sourceMappingURL=8.9d735665da001a1fdb16.js.map